(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{49:function(e,n,t){e.exports=t(98)},54:function(e,n,t){},60:function(e,n,t){},61:function(e,n,t){},96:function(e,n,t){},97:function(e,n,t){},98:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(12),i=t.n(o),c=(t(54),t(5)),l=t(6),u=t(23),d={ADD_POINT:"[Point] add point",REMOVE_POINT:"[Point] remove point",CHANGE_ORDER:"[Point] change order",CHANGE_COORDINATES:"[Point] change point coordinate"};function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(t,!0).forEach(function(n){Object(u.a)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var m={1:{id:1,index:0,coordinates:{lat:-41.28,lng:174.69},name:"first point"},2:{id:2,index:1,coordinates:{lat:-41.24,lng:174.74},name:"second point"},3:{id:3,index:2,coordinates:{lat:-41.3,lng:174.78},name:"third point"}};var f={CHANGE_CENTER:"[Map] change center"},g={mapCenter:{lat:-41.253,lng:174.751}};var v=Object(l.c)({points:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n=arguments.length>1?arguments[1]:void 0,t=n.payload,r=void 0===t?{}:t,a=r.pointId,o=r.coordinates,i=p({},e);switch(n.type){case d.CHANGE_ORDER:var c=r.newIndex;return function(e,n,t){var r=Object.values(e),a=r.find(function(e){return e.index===n});return r.sort(function(e,n){return e.index-n.index}),r.splice(n,1),r.splice(t,0,a),r.reduce(function(e,n,t){return e[n.id]=p({},n,{index:t}),e},{})}(e,r.oldIndex,c);case d.ADD_POINT:var l=+(new Date).getTime().toString(),u=r.name;return i[l]={name:u,coordinates:o,id:l,index:Object.keys(e).length},i;case d.REMOVE_POINT:var s=p({},e);return delete s[a],s;case d.CHANGE_COORDINATES:var f=p({},e[a],{coordinates:o});return delete i[a],i[a]=f,i;default:return e}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=arguments.length>1?arguments[1]:void 0,t=n.payload;switch(n.type){case f.CHANGE_CENTER:return{mapCenter:t.mapCenterCoordinates};default:return e}}}),O=Object(l.e)(v),b=t(2),E=t.n(b),h=t(45),y=Object(h.a)(function(e){return e.points},function(e){return Object.values(e).sort(function(e,n){return e.index-n.index})});t(60);var C=function(e){var n=e.point,t=e.removePoint,r=n.name,o=n.id;return a.a.createElement("div",{className:"point-item"},a.a.createElement("div",{"data-testid":"task-content",className:"point-item__name"},r),a.a.createElement("div",{className:"point-item__remove-icon",onClick:function(){return t(o)}},"x"))},P=t(26);t(61);function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var w=function(e){return{border:e?"dashed 1px gray":"solid 1px white"}},N=function(e,n){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(t,!0).forEach(function(n){Object(u.a)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({background:e?"#CDDC39":"#8BC34A"},n)};var _=function(e){var n=e.points,t=e.onDragEnd,r=e.removePoint,o=n.map(function(e,n){return a.a.createElement(P.b,{key:e.id,draggableId:e.id,index:e.index},function(n,t){return a.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps,{style:N(t.isDragging,n.draggableProps.style),className:"point-item-container"}),a.a.createElement(C,{point:e,removePoint:r}))})});return a.a.createElement("div",{className:"points-container"},a.a.createElement("span",null,"\u041c\u0430\u0440\u0448\u0440\u0443\u0442"),(n&&n.length)>0?a.a.createElement(P.a,{onDragEnd:function(e){return t(e)}},a.a.createElement(P.c,{droppableId:"droppable"},function(e,n){return a.a.createElement("div",Object.assign({className:"points-column"},e.droppableProps,{ref:e.innerRef,style:w(n.isDraggingOver),"data-testid":"point-column"}),o,e.placeholder)})):a.a.createElement("div",{className:"empty-point-list"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0447\u0435\u043a \u043f\u0443\u0441\u0442"))};_.propTypes={points:E.a.arrayOf(E.a.shape({id:b.number,index:b.number,coordinates:E.a.shape({lat:b.number,lng:b.number}),name:b.string})),changePointOrder:b.func,removePoint:b.func};var D=Object(c.b)(function(e){return{points:y(e)}},{changePointOrder:function(e,n){return{type:d.CHANGE_ORDER,payload:{oldIndex:e,newIndex:n}}},removePoint:function(e){return{type:d.REMOVE_POINT,payload:{pointId:e}}}})(function(e){var n=e.points,t=e.changePointOrder,r=e.removePoint;return a.a.createElement(_,{points:n,removePoint:r,onDragEnd:function(e){if(e.destination){var n=e.source.index,r=e.destination.index;t(n,r)}}})}),x=t(11);t(96);var k=function(e){var n=e.addPoint,t=Object(r.useState)(""),o=Object(x.a)(t,2),i=o[0],c=o[1],l=Object(r.useState)(""),u=Object(x.a)(l,2),d=u[0],s=u[1];return a.a.createElement("div",{className:"add-point-form__container ".concat(d?"error":"")},a.a.createElement("span",{className:"add-point-form__label"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0447\u043a\u0443"),a.a.createElement("input",{type:"text",placeholder:"\u041d\u043e\u0432\u0430\u044f \u0442\u043e\u0447\u043a\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",className:"add-point-form__input",value:i,onChange:function(e){var n=e.target.value;n.length>30?s("\u0414\u043b\u0438\u043d\u0430 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0442\u043e\u0447\u043a\u0438 - \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):(c(n),s(null))},onKeyDown:function(e){13===e.keyCode&&!1===e.shiftKey&&i&&(n(i),c(""))}}),a.a.createElement("span",{className:"add-point-form__error"},d))};var I=Object(c.b)(function(e){return{mapCenter:(n=e,n.map.mapCenter)};var n},{addPoint:function(e,n){return{type:d.ADD_POINT,payload:{name:e,coordinates:n}}}})(function(e){var n=e.addPoint,t=e.mapCenter;return a.a.createElement(k,{addPoint:function(e){n(e,t)}})}),A=t(101),R=t(102),S=t(9);var T=function(e){var n=e.points.reduce(function(e,n){return e.push(n.coordinates),e},[]);return a.a.createElement(S.e,{path:n,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:3e4,zIndex:1}})};var H=function(e){var n=e.points,t=e.changePointCoordinate,r=e.onClick;return n.map(function(e){return a.a.createElement("div",{key:e.id},a.a.createElement(S.d,{position:e.coordinates,onDragEnd:function(n){t(e.id,{lat:n.latLng.lat(),lng:n.latLng.lng()})},onClick:function(){return r(e.id)},draggable:!0}))})};var M=function(e){var n=e.point,t=e.onClose,r=n.coordinates,o=n.name;return a.a.createElement(S.b,{position:r,onCloseClick:t},a.a.createElement("div",{className:"point-info-window hidden",style:{fontWeight:"bold"}},a.a.createElement("span",null,o)))},G={lat:-41.253,lng:174.751},L=12;var F=a.a.memo(function(e){var n=Object(S.f)();return a.a.useEffect(function(){n.addListener("center_changed",function(){var t=n.center.lat(),r=n.center.lng();e.setLat(t),e.setLng(r)})},[n,e]),a.a.createElement(a.a.Fragment,null)});var W=function(e){var n=e.points,t=e.onChangeMapCenter,o=e.changePointCoordinate,i=Object(r.useState)(G.lat),c=Object(x.a)(i,2),l=c[0],u=c[1],d=Object(r.useState)(G.lng),s=Object(x.a)(d,2),p=s[0],m=s[1],f=Object(r.useState)(!0),g=Object(x.a)(f,2),v=g[0],O=g[1],b=Object(r.useState)(),E=Object(x.a)(b,2),h=E[0],y=E[1];return a.a.createElement(S.c,{id:"script-loader",googleMapsApiKey:"AIzaSyBwCOCQz1iTe1H8WPym6pHbw93MVlRp8tE"},a.a.createElement(S.a,{id:"map",onCenterChanged:function(){return t({lat:l,lng:p})},mapContainerStyle:{height:"100%",width:"100%"},zoom:L,center:{lat:l,lng:p},onClick:function(){O(!1)}},a.a.createElement(H,{points:n,changePointCoordinate:o,onClick:function(e){e&&(y(n.find(function(n){return n.id===e})),O(!0))}}),a.a.createElement(T,{points:n}),v&&h?a.a.createElement(M,{point:h,onClose:function(){O(!1)}}):a.a.createElement(a.a.Fragment,null),a.a.createElement(F,{setLat:u,setLng:m})))};var z=Object(c.b)(function(e){return{points:y(e)}},{changeMapCenter:function(e){return{type:f.CHANGE_CENTER,payload:{mapCenterCoordinates:e}}},changePointCoordinate:function(e,n){return{type:d.CHANGE_COORDINATES,payload:{pointId:e,coordinates:n}}}})(function(e){var n=e.points,t=e.changeMapCenter,r=e.changePointCoordinate,o=new A.a;return o.pipe(Object(R.a)(300)).subscribe(function(e){e&&t(e)}),a.a.createElement(W,{points:n,onChangeMapCenter:function(e){return o.next(e)},changePointCoordinate:r})});t(97);var B=function(){return a.a.createElement(c.a,{store:O},a.a.createElement("div",{className:"main-container"},a.a.createElement("div",{className:"main-container__points-column"},a.a.createElement(I,null),a.a.createElement(D,null)),a.a.createElement("div",{className:"main-container__map-column"},a.a.createElement(z,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[49,1,2]]]);
//# sourceMappingURL=main.fd43e43f.chunk.js.map